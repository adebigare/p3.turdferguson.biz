<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Project 3 : DWA15</title>
<!--         <link rel="stylesheet" href="css/style.css">
 -->        <link rel="author" href="humans.txt">
				<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
				<script type="text/javascript">
				</script>
        <style type="text/css">
            .node {
              stroke: #fff;
              stroke-width: 1.5px;
            }
        </style>

    </head>
    <body>

    	<script type="text/javascript">

    	////////////////////////////// D3 Chart ////////////////////////////
        var width = 960,
            height = 500;

        var color = d3.scale.category20();

        var force = d3.layout.force()
            .charge(-120)
            .linkDistance(30)
            .size([width, height]);

        var svg = d3.select("body").append("svg")
            .attr("width", width)
            .attr("height", height);

        var lines;

    	// Invoke the Data
    	d3.csv ('Satellites.csv', function(error, satellites) { 

            var satellites = d3.nest()
                            .key(function(d) {return d.country_of_operator_owner})
                            .key(function(d) {return d.users})
                            .key(function(d) {return d.purpose})
                            .rollup(function(v) {return v.map(function(d) {return d.class_of_orbit; }); })

                            .entries(satellites);

            force.nodes(satellites, function(d) {return d.country_of_operator_owner})
            .start();


            var node = svg.selectAll(".node")
                        .data(satellites)
                        .enter()
                        .append("circle")
                        .attr("class", "node")
                        .attr("r", 5)
                        .style("fill", color())
                        .call(force.drag);

            force.on("tick", function() {  
              node.attr("cx", function(d) { return d.x; })
                  .attr("cy", function(d) { return d.y; });
            });

	  	});


    	</script>

        </body>
</html>